<input class="translate" type="hidden" id="media_question_confirm" value="Are you sure you want to remove this question?" />
{#foreach $T.questions as question}
    <div id="q_view_{$T.question$index}">
        <h4>
            {#if $T.admin_p}
                {#if $T.question$index > 0}
                    [<a href="javascript:question_move_up({$T.question$index});">^</a>]&nbsp;
                {#/if}
                [<a onclick="return confirm($('#media_question_confirm').val());" href="javascript:question_remove({$T.question$index})">x</a>]
                [<a href="javascript:question_edit({$T.question$index})"><span class="translate">Edit</span></a>]
            {#/if}
            {$T.question$index + 1}. {$T.question.question}
            (<span class="translate">{$T.question.choice_type}</span>,
            <span class="translate">select between</span> {$T.question.min}
            <span class="translate">and</span>
            {#if $T.question.max != null}
                {$T.question.max}
            {#else}
                <span class="translate">unlimited</span>
            {#/if}
            <span class="translate" singular="answer" number="{#if $T.question.max != null}{$T.question.max}{#else}0{#/if}">answers</span>,
            <span class="translate">result type</span> <span class="translate">{$T.question.result_type}</span>.)
        </h4>
        <ul>
            {#foreach $T.question.answers as answer}
            <li> {$T.answer}
                {#if $T.question.answer_urls[$T.answer$index]}
                    [<a target="_new" href="{$T.question.answer_urls[$T.answer$index]}"><span class="translate">More</span></a>]
                {#/if}
            </li>
            {#/for}
        </ul>
    </div>
    <div id="q_edit_{$T.question$index}" style="display:none;">
        <form id="question_edit_{$T.question$index}_form"
              onsubmit="question_update({$T.question$index}, this); return false;" action="#">
            <p>
                <!--
                  Type of Question:
                  <select name="choice_type">
                    <option selected>approval</option>
                  </select>
                -->
                <input type="hidden" name="choice_type" value="approval" />
                <b>{$T.question$index + 1}.</b> &nbsp;&nbsp;&nbsp;<span class="translate">Select between</span>&nbsp;&nbsp;
                <select name="min">
                    <option selected>0</option>
                    {#for option_index = 1 to 20}
                        <option>{$T.option_index}</option>
                    {#/for}
                </select>
                &nbsp;&nbsp; <span class="translate">and</span> &nbsp;&nbsp;
                <select name="max">
                    <option>0</option>
                    <option selected>1</option>
                    {#for option_index = 2 to 50}
                        <option>{$T.option_index}</option>
                    {#/for}
                    <option class="translate" value="">- (approval)</option>
                </select>
                &nbsp;&nbsp;
                <span class="translate" singular="answer" number="0">answers</span>.
                &nbsp;&nbsp;
                &nbsp;&nbsp;
                <span class="translate">Result Type</span>:&nbsp;
                <select name="result_type">
                    <option class="translate" value="absolute" selected>absolute</option>
                    <option class="translate" value="relative">relative</option>
                </select>
            </p>
            <table id="answer_table_{$T.question$index}">
                <tbody>
                <tr>
                    <th colspan="2"><span class="translate">Question</span>:</th>
                    <td><input type="text" name="question" size="70"/></td>
                </tr>
                <tr>
                    <th>&nbsp;</th>
                    <th>&nbsp;</th>
                    <th>&nbsp;</th>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                    <th colspan="2"></th>
                    <th>
                        <a href="javascript:add_answers($('#answer_table_{$T.question$index}'),5)">
                            <span class="translate">Add 5 more answers</span>
                        </a>
                    </th>
                </tr>
                <tr>
                    <td colspan="3">
                        <input class="translate" type="submit" value="Update question" /> &nbsp;
                        <input id="media_question_cancel_{$T.question$index}" type="reset"
                               onclick="question_edit_cancel({$T.question$index});" value="Cancel" />
                    </td>
                </tr>
                </tfoot>
            </table>
        </form>
    </div>
{#else}
    <span class="translate">No questions yet.</span>
{#/for}
{#if $T.admin_p}
    <h4><span class="translate">Add a Question</span>:</h4>
    <form id="question_form" onsubmit="question_add(this); return false;" action="#">
        <p>
            <!--
              Type of Question:
              <select name="choice_type">
                <option selected>approval</option>
              </select>
            -->
            <input type="hidden" name="choice_type" value="approval" />
            &nbsp;&nbsp;&nbsp;<span class="translate">Select between</span>&nbsp;&nbsp;
            <select name="min">
                <option selected>0</option>
                {#for option_index = 1 to 20}
                    <option>{$T.option_index}</option>
                {#/for}
            </select>
            &nbsp;&nbsp; <span class="translate">and</span> &nbsp;&nbsp;
            <select name="max">
                <option>0</option>
                <option selected>1</option>
                {#for option_index = 2 to 50}
                    <option>{$T.option_index}</option>
                {#/for}
                <option class="translate" value="">- (approval)</option>
            </select>
            &nbsp;&nbsp;
            <span class="translate">answers</span>.
            &nbsp;&nbsp;
            &nbsp;&nbsp;
            <span class="translate">Result Type</span>:&nbsp;
            <select name="result_type">
                <option class="translate" value="absolute" selected>absolute</option>
                <option class="translate" value="relative">relative</option>
            </select>

        </p>
        <table id="answer_table" style="width:100%;">
            <tbody>
            <tr>
                <th colspan="2"><span class="translate">Question</span>:</th>
                <td><input type="text" name="question" size="70"/></td>
            </tr>
            <tr>
                <th>&nbsp;</th>
                <th>&nbsp;</th>
                <th>&nbsp;</th>
            </tr>
            </tbody>
            <tfoot>
            <tr>
                <th colspan="2"></th>
                <th>
                    <a href="javascript:add_answers($('#answer_table'), 5)">
                        <span class="translate">Add 5 more answers</span>
                    </a>
                </th>
            </tr>
            <tr>
                <td colspan="2">
                    <input class="translate" type="submit" value="Add question" />
                </td>
            </tr>
            </tfoot>
        </table>
    </form>
    <script type="application/javascript">
        gettext('Are you sure you want to remove this question?');
        gettext('Edit');
        gettext('unlimited');
        gettext('More');
        gettext('select between');
        gettext('and');
        ngettext('answer', 'answers', 0);
        gettext('result type');
        gettext('Select between');
        gettext('- (approval)');
        gettext('approval');
        gettext('Result Type');
        gettext('absolute');
        gettext('relative');
        gettext('Question');
        gettext('Add 5 more answers');
        gettext('Update question');
        gettext('Cancel');
        gettext('No questions yet.');
        gettext('Add a Question');
        gettext('Select between');
        gettext('Add question');
    </script>
{#/if}
